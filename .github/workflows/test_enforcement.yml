name: Enforce Tests for PR (to be deleted after testing)

on:
  pull_request:
    types: [ labeled, synchronize ]

#Pass test if there is a label
jobs:
  enforce-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository and submodules
        uses: actions/checkout@v2

      - name: "Check for tests"
        uses: brettcannon/check-for-changed-files@v1
        with:
          file-pattern: |
            tests/*.py
            tests/*/*.py
          skip-label: "tests not required"
          failure-message: "Missing a tests in ${file-pattern}; please add at least one or apply the ${skip-label} label to the pull request"
